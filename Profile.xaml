<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="BetterCLS.Profile"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:BetterCLS"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ic="using:FluentIcons.WinUI"
    mc:Ignorable="d">

    <Grid>
        <SplitView PanePlacement="Left" DisplayMode="Inline" IsPaneOpen="True" PaneBackground="Transparent">
            <SplitView.Pane>
                <ScrollViewer>
                    <StackPanel Orientation="Vertical" Spacing="10">
                        <Grid x:Name="ProfileGrid" RowSpacing="10" ColumnSpacing="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition Height="Auto"></RowDefinition>
                            </Grid.RowDefinitions>
                            <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Vertical" Spacing="8" >
                                <TextBlock   Text="学院" FontWeight="SemiBold"></TextBlock>
                                <TextBlock   Text="{Binding College}" Foreground="{ThemeResource TextFillColorSecondaryBrush}" FontSize="10"></TextBlock>
                            </StackPanel>
                            <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Vertical" Spacing="8">
                                <TextBlock   Text="综合评分" FontWeight="SemiBold"></TextBlock>
                                <TextBlock   Text="{Binding Rating}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"></TextBlock>
                            </StackPanel>
                            <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Vertical" Spacing="8">
                                <TextBlock   Text="评分人数" FontWeight="SemiBold"></TextBlock>
                                <TextBlock   Text="{Binding RaterCount}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"></TextBlock>
                            </StackPanel>
                            <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Vertical" Spacing="8">
                                <TextBlock   Text="热度" FontWeight="SemiBold"></TextBlock>
                                <TextBlock   Text="{Binding Heat}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"></TextBlock>
                            </StackPanel>

                        </Grid>
                        <Grid Margin="0,5,0,0" RowSpacing="10">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition Height="Auto"></RowDefinition>
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Row="0" Text="任教课程数据" x:Name="VoteTitle" FontWeight="SemiBold" Foreground="{ThemeResource AccentAAFillColorDefaultBrush}" FontSize="16"></TextBlock>
                            <ListView Grid.Row="1" x:Name="GpaList" IsItemClickEnabled="True" ItemClick="GpaList_ItemClick">
                                <ListView.Header>
                                    <Grid Padding="10,0,5,0" ColumnSpacing="10">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"></ColumnDefinition>
                                            <ColumnDefinition Width="60"></ColumnDefinition>
                                            <ColumnDefinition Width="45"></ColumnDefinition>
                                            <ColumnDefinition Width="45"></ColumnDefinition>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="课程名称" FontWeight="SemiBold"></TextBlock>
                                        <TextBlock Grid.Column="1" Text="投票数" FontWeight="SemiBold"></TextBlock>
                                        <TextBlock Grid.Column="2" Text="绩点" FontWeight="SemiBold"></TextBlock>
                                        <TextBlock Grid.Column="3" Text="偏移" FontWeight="SemiBold"></TextBlock>
                                    </Grid>
                                </ListView.Header>
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Grid ColumnSpacing="10">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"></ColumnDefinition>
                                                <ColumnDefinition Width="60"></ColumnDefinition>
                                                <ColumnDefinition Width="45"></ColumnDefinition>
                                                <ColumnDefinition Width="45"></ColumnDefinition>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="{Binding CourseName}" Margin="0,3,0,3" TextWrapping="Wrap" Foreground="{ThemeResource TextFillColorSecondaryBrush}" FontSize="12" VerticalAlignment="Center" ></TextBlock>
                                            <TextBlock Grid.Column="1" Text="{Binding StudentCount}" FontSize="12" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>
                                            <TextBlock Grid.Column="2" Text="{Binding AverageGpa}" FontSize="12" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>
                                            <TextBlock Grid.Column="3" Text="{Binding StandardDeviation}" FontSize="12" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>
                                        </Grid>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>

                        </Grid>
                        <Grid Margin="0,5,0,0" RowSpacing="10">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition Height="Auto"></RowDefinition>
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Row="0" Text="平行班"  FontWeight="SemiBold" Foreground="LightSteelBlue" FontSize="16"></TextBlock>
                            <ListView Grid.Row="1" x:Name="TeacherList" IsItemClickEnabled="True" ItemClick="TeacherList_ItemClick" >
                                <ListView.Header>
                                    <Grid Padding="10,0,5,0" ColumnSpacing="10">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"></ColumnDefinition>
                                            <ColumnDefinition Width="60"></ColumnDefinition>
                                            <ColumnDefinition Width="45"></ColumnDefinition>
                                            <ColumnDefinition Width="45"></ColumnDefinition>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="教师" FontWeight="SemiBold"></TextBlock>
                                        <TextBlock Grid.Column="1" Text="投票数" FontWeight="SemiBold"></TextBlock>
                                        <TextBlock Grid.Column="2" Text="绩点" FontWeight="SemiBold"></TextBlock>
                                        <TextBlock Grid.Column="3" Text="偏移" FontWeight="SemiBold"></TextBlock>
                                    </Grid>
                                </ListView.Header>
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Grid ColumnSpacing="10">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"></ColumnDefinition>
                                                <ColumnDefinition Width="60"></ColumnDefinition>
                                                <ColumnDefinition Width="40"></ColumnDefinition>
                                                <ColumnDefinition Width="40"></ColumnDefinition>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="{Binding TeacherName}" Margin="0,3,0,3" TextWrapping="Wrap" Foreground="{ThemeResource TextFillColorSecondaryBrush}" FontSize="12" VerticalAlignment="Center"></TextBlock>
                                            <TextBlock Grid.Column="1" Text="{Binding StudentCount}" FontSize="12" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>
                                            <TextBlock Grid.Column="2" Text="{Binding AverageGpa}" FontSize="12" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>
                                            <TextBlock Grid.Column="3" Text="{Binding StandardDeviation}" FontSize="12" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>
                                        </Grid>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>

                        </Grid>
                    </StackPanel>
                </ScrollViewer>
                
            </SplitView.Pane>
            <SplitView.Content>
                <Grid RowSpacing="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="*"></RowDefinition>
                    </Grid.RowDefinitions>

                    <Grid Grid.Row="0" >
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Spacing="10">
                            <Button  Padding="7"  x:Name="back" Click="back_Click">
                                <ic:SymbolIcon Symbol="ArrowLeft"></ic:SymbolIcon>
                            </Button>
                            <TextBlock x:Name="NamePresenter"  Text="{Binding Name}" FontWeight="SemiBold" FontSize="23" Foreground="LightSeaGreen"></TextBlock>
                        </StackPanel>
                        <Button  Padding="7"  HorizontalAlignment="Right" x:Name="settings" Click="settings_Click">
                            <ic:SymbolIcon Symbol="Settings"></ic:SymbolIcon>
                        </Button>
                    </Grid>
                    <TeachingTip x:Name="About" Target="{x:Bind settings}" IsLightDismissEnabled="True" TailVisibility="Collapsed">
                        <StackPanel Orientation="Vertical" Spacing="10">
                            <Grid>
                                <TextBlock Text="Better-CsvLinearScanner" FontWeight="SemiBold" VerticalAlignment="Center" Foreground="LightSeaGreen"></TextBlock>
                                <Button  Padding="7"  BorderThickness="0" HorizontalAlignment="Right" x:Name="close" Click="close_Click" Background="LightGray">
                                    <FontIcon Glyph="&#xE711;" />
                                </Button>
                            </Grid>
                            <Border Margin="5" Background="#77eeeeee" CornerRadius="4">
                                <TextBlock  Foreground="{ThemeResource TextFillColorSecondaryBrush}" TextWrapping="Wrap">
                                    <Run Text="简洁的CSV文件索引工具,"></Run>
                                    <LineBreak></LineBreak>
                                    <Run Text="由Ansherly用摸🐟打造。"></Run>
                                    <LineBreak></LineBreak>
                                    
                                    <Hyperlink  x:Name="Git" Click="Git_Click">Github仓库</Hyperlink>
                                </TextBlock>
                            </Border>
                            
                            <TextBox  x:Name="source" PlaceholderText="默认使用内置数据源"></TextBox>
                            <Grid>
                                <Button  Padding="7"  BorderThickness="0"  x:Name="rec" Click="rec_Click" Background="LightGray" HorizontalAlignment="Left">
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <ic:SymbolIcon Symbol="LeafOne"></ic:SymbolIcon>
                                        <TextBlock Text="使用默认数据库"></TextBlock>
                                    </StackPanel>
                                </Button>
                                <Button  Padding="7"  BorderThickness="0"  x:Name="switchsource" Click="source_Click" Background="LightGray" HorizontalAlignment="Right">
                                    <ic:SymbolIcon Symbol="Folder"></ic:SymbolIcon>
                                </Button>
                            </Grid>
                            
                        </StackPanel>
                    </TeachingTip>
                    <ScrollViewer Grid.Row="3">
                        <ItemsRepeater x:Name="CommentList">
                            <ItemsRepeater.Layout>
                                <StackLayout Orientation="Vertical" Spacing="5"></StackLayout>
                            </ItemsRepeater.Layout>
                            <ItemsRepeater.ItemTemplate>
                                <DataTemplate>
                                    <Grid Padding="8" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"  BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="5" >
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                        </Grid.RowDefinitions>

                                        <Border  Grid.Row="0" Padding="10" CornerRadius="3" Background="#77eeeeee">
                                            <TextBlock x:Name="Drawer" FontFamily="Noto Sans SC" Text="{Binding Content}" TextWrapping="Wrap" Foreground="{ThemeResource TextFillColorSecondaryBrush}"></TextBlock>
                                        </Border>

                                        <TextBlock Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Center" Text="{Binding PublishTime}"  FontSize="12"   Foreground="{ThemeResource TextFillColorSecondaryBrush}"></TextBlock>



                                        <StackPanel Orientation="Horizontal" Grid.Row="1" Spacing="10" HorizontalAlignment="Left">
                                            <Button Background="Transparent"  Tag="1"  HorizontalAlignment="Left" Margin="0,10,0,0" x:Name="Like" >
                                                <StackPanel Orientation="Horizontal" Spacing="5" >
                                                    <ic:SymbolIcon Symbol="ThumbLike" FontSize="10" Foreground="{ThemeResource AccentAAFillColorDefaultBrush}"  ></ic:SymbolIcon>
                                                    <TextBlock Text="{Binding LikeCount}" Grid.Row="2"  HorizontalAlignment="Right" FontSize="11" Foreground="{ThemeResource TextFillColorSecondaryBrush}"></TextBlock>
                                                </StackPanel>
                                            </Button>

                                            <Button Background="Transparent" Tag="2" HorizontalAlignment="Left" Margin="0,10,0,0"  >
                                                <StackPanel Orientation="Horizontal" Spacing="5" >
                                                    <ic:SymbolIcon Symbol="ThumbDislike" FontSize="10" Foreground="{ThemeResource TextFillColorSecondaryBrush}" ></ic:SymbolIcon>
                                                    <TextBlock Text="{Binding DislikeCount}"  HorizontalAlignment="Right" FontSize="11" Foreground="{ThemeResource TextFillColorSecondaryBrush}"></TextBlock>
                                                </StackPanel>
                                            </Button>

                                        </StackPanel>
                                    </Grid>
                                </DataTemplate>
                            </ItemsRepeater.ItemTemplate>
                        </ItemsRepeater>
                    </ScrollViewer>
                </Grid>
            </SplitView.Content>
        </SplitView>
        <local:InfoFlower x:Name="Flower" HorizontalAlignment="Center"></local:InfoFlower>
    </Grid>
</Page>
